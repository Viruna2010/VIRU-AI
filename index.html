<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIRU AI | SUPREME SPEED</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+Sinhala:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #0f0f10; --card: #1e1f20; --text: #e3e3e3; --accent: #a8c7fa; --user: #2b2c2f; --border: #333; }
        body { margin: 0; font-family: 'Inter', 'Noto Sans Sinhala', sans-serif; background: var(--bg); color: var(--text); height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        header { padding: 15px 25px; background: var(--card); border-bottom: 1px solid var(--border); font-weight: 700; font-size: 22px; display: flex; justify-content: space-between; align-items: center; }
        #chat { flex: 1; overflow-y: auto; padding: 20px 10%; display: flex; flex-direction: column; gap: 20px; scroll-behavior: smooth; }
        .msg { max-width: 85%; padding: 14px 20px; border-radius: 20px; line-height: 1.6; font-size: 16px; animation: pop 0.2s ease-out; }
        @keyframes pop { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .u { align-self: flex-end; background: var(--user); border-bottom-right-radius: 5px; }
        .a { align-self: flex-start; border-left: 4px solid var(--accent); background: rgba(255,255,255,0.03); }
        .input-box { padding: 20px 10%; background: var(--bg); }
        .container { background: var(--card); border-radius: 35px; padding: 8px 25px; display: flex; border: 1px solid var(--border); transition: 0.3s; }
        .container:focus-within { border-color: var(--accent); box-shadow: 0 0 15px rgba(168,199,250,0.1); }
        input { flex: 1; background: transparent; border: none; color: white; padding: 12px; font-size: 16px; outline: none; }
        button { background: transparent; border: none; color: var(--accent); cursor: pointer; font-size: 26px; font-weight: bold; }
        .ld { font-size: 12px; color: var(--accent); margin-left: 10%; margin-bottom: 10px; display: none; }
    </style>
</head>
<body>
    <header><div>VIRU <span style="color:var(--accent)">AI</span></div><button style="font-size:12px; color:#666;" onclick="location.reload()">New Chat</button></header>
    <div id="chat"><div class="msg a">‡∂Ü‡∂∫‡∑î‡∂∂‡∑ù‡∑Ä‡∂±‡∑ä! ‡∂∏‡∂∏ ‡∑Ä‡∑í‡∂ª‡∑ñ AI. üöÄüî•</div></div>
    <div id="loader" class="ld">Viru AI is thinking...</div>
    <div class="input-box"><div class="container">
        <input type="text" id="in" placeholder="Ask Viru AI..." autocomplete="off">
        <button onclick="send()">‚ûî</button>
    </div></div>
    <script>
        const chat = document.getElementById('chat');
        const input = document.getElementById('in');
        const loader = document.getElementById('loader');

        input.addEventListener("keypress", (e) => { if(e.key === "Enter") send(); });

        async function send() {
            const val = input.value.trim();
            if(!val) return;
            input.value = '';
            chat.innerHTML += `<div class="msg u">${val}</div>`;
            chat.scrollTop = chat.scrollHeight;

            loader.style.display = 'block';

            try {
                // YOUR DIRECT API URL INCLUDED HERE
                const res = await fetch(`https://viru-ai-api.vercel.app/api/chat?msg=${encodeURIComponent(val)}`);
                const data = await res.json();
                loader.style.display = 'none';
                chat.innerHTML += `<div class="msg a">${data.reply}</div>`;
            } catch {
                loader.style.display = 'none';
                chat.innerHTML += `<div class="msg a">Error connecting to server. üõ†Ô∏è</div>`;
            }
            chat.scrollTop = chat.scrollHeight;
        }
    </script>
</body>
</html>
